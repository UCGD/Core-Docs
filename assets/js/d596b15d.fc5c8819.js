"use strict";(self.webpackChunkcore=self.webpackChunkcore||[]).push([[2056],{3905:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return u}});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=r.createContext({}),p=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},c=function(e){var n=p(e.components);return r.createElement(s.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=p(t),u=a,f=m["".concat(s,".").concat(u)]||m[u]||d[u]||i;return t?r.createElement(f,o(o({ref:n},c),{},{components:t})):r.createElement(f,o({ref:n},c))}));function u(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=m;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var p=2;p<i;p++)o[p]=t[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},2244:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return c},default:function(){return m}});var r=t(7462),a=t(3366),i=(t(7294),t(3905)),o=["components"],l={},s="Version 3+",p={unversionedId:"UCGD-Pipeline/version_3",id:"UCGD-Pipeline/version_3",isDocsHomePage:!1,title:"Version 3+",description:"Technical Document",source:"@site/docs/UCGD-Pipeline/version_3.md",sourceDirName:"UCGD-Pipeline",slug:"/UCGD-Pipeline/version_3",permalink:"/Core-Docs/docs/UCGD-Pipeline/version_3",editUrl:"https://github.com/UCGD/Core-Docs/docs/docs/UCGD-Pipeline/version_3.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Version 2+",permalink:"/Core-Docs/docs/UCGD-Pipeline/version_2"},next:{title:"Setup",permalink:"/Core-Docs/docs/UCGD-Projects/setup"}},c=[{value:"Major changes from Version 2:",id:"major-changes-from-version-2",children:[]},{value:"Scope of Work",id:"scope-of-work",children:[]},{value:"Directory outlines",id:"directory-outlines",children:[]},{value:"Component description",id:"component-description",children:[]},{value:"Processing Overview",id:"processing-overview",children:[]},{value:"Pipeline DAG visualisation",id:"pipeline-dag-visualisation",children:[]}],d={toc:c};function m(e){var n=e.components,l=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,r.Z)({},d,l,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"version-3"},"Version 3+"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://docs.google.com/document/d/1vuGm7ywKmLhwoOGC1-ovweX0BqTvJ_dbCI-ulwFKSl0/edit?usp=sharing"},"Technical Document")),(0,i.kt)("h3",{id:"major-changes-from-version-2"},"Major changes from Version 2:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Migration to Nextflow's ",(0,i.kt)("a",{parentName:"li",href:"https://www.nextflow.io/docs/latest/dsl2.html"},"DSL2")," framework, which allows an improved ability to modularize and compartmentalize Nextflow processes and code."),(0,i.kt)("li",{parentName:"ul"},"Nextflow process to occur and remain within the ",(0,i.kt)("inlineCode",{parentName:"li"},"[IRB]/[PROJECT]/Scratch")," location."),(0,i.kt)("li",{parentName:"ul"},"Reference GRCh38 is the default and only reference used."),(0,i.kt)("li",{parentName:"ul"},"Processing based on UCGD ",(0,i.kt)("inlineCode",{parentName:"li"},"scope_of_work"),".")),(0,i.kt)("h3",{id:"scope-of-work"},"Scope of Work"),(0,i.kt)("p",null,"Central to processing is the UCGD concept of ",(0,i.kt)("inlineCode",{parentName:"p"},"scope_of_work")," which is defined into the following subtypes and used as Nextflow ",(0,i.kt)("inlineCode",{parentName:"p"},"-entry")," options"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Nextflow entry options"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"VAR")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"DGN")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"NEO")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"SV")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"JGT")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"MOSAIC")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"POST_PROCESS")))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"VAR")," & ",(0,i.kt)("inlineCode",{parentName:"p"},"DGN")," will run all steps of the pipeline, including  ",(0,i.kt)("inlineCode",{parentName:"p"},"SV"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"JGT"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"MOSAIC")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"POST_PROCESS")," steps, however ",(0,i.kt)("inlineCode",{parentName:"p"},"SV"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"JGT"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"MOSAIC")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"POST_PROCESS")," can be run independently if required input files are present."),(0,i.kt)("p",null,"Other entries can and will be added in the future including ",(0,i.kt)("inlineCode",{parentName:"p"},"RNA"),"."),(0,i.kt)("h3",{id:"directory-outlines"},"Directory outlines"),(0,i.kt)("p",null,"The final data locations will remain the same (including read-only permission)."),(0,i.kt)("h4",{id:"final-project-directories"},"Final project directories:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"./scratch/ucgd/lustre/UCGD_Datahub/IRBs/[IRB]/[PROJECT]/UCGD\n\u2514\u2500\u2500 GRCh38\n    \u251c\u2500\u2500 Analysis\n    \u251c\u2500\u2500 Data\n    \u2502   \u2514\u2500\u2500 PolishedCrams\n    \u251c\u2500\u2500 Reports\n    \u2502   \u251c\u2500\u2500 alignstats\n    \u2502   \u251c\u2500\u2500 fastp\n    \u2502   \u251c\u2500\u2500 goleft\n    \u2502   \u251c\u2500\u2500 mosaic\n    \u2502   \u251c\u2500\u2500 peddy\n    \u2502   \u2514\u2500\u2500 runlogs\n    \u2514\u2500\u2500 VCF\n        \u251c\u2500\u2500 Complete\n        \u251c\u2500\u2500 GVCFs\n        \u251c\u2500\u2500 Manta\n        \u2514\u2500\u2500 Smoove\n")),(0,i.kt)("h4",{id:"project-scratch-directory"},"Project scratch directory"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"./scratch/ucgd/lustre/UCGD_Datahub/IRBs/[IRB]/[PROJECT]/Scratch\n\u251c\u2500\u2500 Analysis\n\u251c\u2500\u2500 BAMs\n\u251c\u2500\u2500 Fastqs\n\u251c\u2500\u2500 nextflow\n\u2502   \u251c\u2500\u2500 [PROJECT].config\n\u2502   \u251c\u2500\u2500 ucgd_main.nf\n\u2502   \u251c\u2500\u2500 ucgd.master.config\n\u2502   \u251c\u2500\u2500 ucgd_post_params.yaml\n\u2502   \u251c\u2500\u2500 ucgd_versions.yml\n\u2502   \u251c\u2500\u2500 modules\n\u2502   \u2502   \u2514\u2500\u2500 local\n\u2502   \u2502       \u251c\u2500\u2500 alignstats\n\u2502   \u2502       \u2502   \u2514\u2500\u2500 main.nf\n\u2502   \u2502       \u251c\u2500\u2500 bcftools\n\u2502   \u2502       \u2502   \u251c\u2500\u2500 concat\n\u2502   \u2502       \u2502   \u2502   \u2514\u2500\u2500 main.nf\n\u2502   \u2502       \u2502   \u251c\u2500\u2500 merge\n\u2502   \u2502       \u2502   \u2502   \u2514\u2500\u2500 main.nf\n\u2502   \u2502       \u2502   \u251c\u2500\u2500 stats\n\u2502   \u2502       \u2502   \u2502   \u2514\u2500\u2500 main.nf\n\u2502   \u2502       \u2502   \u2514\u2500\u2500 view\n\u2502   \u2502       \u2502       \u2514\u2500\u2500 main.nf\n\u2502   \u2502       \u251c\u2500\u2500 fastp\n\u2502   \u2502       \u2502   \u2514\u2500\u2500 main.nf\n\u2502   \u2502       \u251c\u2500\u2500 fastqforward\n\u2502   \u2502       \u2502   \u251c\u2500\u2500 bam2gvcf\n\u2502   \u2502       \u2502   \u2502   \u2514\u2500\u2500 main.nf\n\u2502   \u2502       \u2502   \u2514\u2500\u2500 fastq2bam\n\u2502   \u2502       \u2502       \u2514\u2500\u2500 main.nf\n\u2502   \u2502       \u251c\u2500\u2500 goleft\n\u2502   \u2502       \u2502   \u2514\u2500\u2500 indexcov\n\u2502   \u2502       \u2502       \u2514\u2500\u2500 main.nf\n\u2502   \u2502       \u251c\u2500\u2500 manta\n\u2502   \u2502       \u2502   \u2514\u2500\u2500 main.nf\n\u2502   \u2502       \u251c\u2500\u2500 mosaic\n\u2502   \u2502       \u2502   \u251c\u2500\u2500 api\n\u2502   \u2502       \u2502   \u2502   \u2514\u2500\u2500 main.nf\n\u2502   \u2502       \u2502   \u2514\u2500\u2500 cli\n\u2502   \u2502       \u2502       \u2514\u2500\u2500 main.nf\n\u2502   \u2502       \u251c\u2500\u2500 multiqc\n\u2502   \u2502       \u2502   \u2514\u2500\u2500 main.nf\n\u2502   \u2502       \u251c\u2500\u2500 peddy\n\u2502   \u2502       \u2502   \u2514\u2500\u2500 main.nf\n\u2502   \u2502       \u251c\u2500\u2500 samtools\n\u2502   \u2502       \u2502   \u2514\u2500\u2500 view\n\u2502   \u2502       \u2502       \u2514\u2500\u2500 main.nf\n\u2502   \u2502       \u251c\u2500\u2500 sentieon\n\u2502   \u2502       \u2502   \u251c\u2500\u2500 gvcftyper\n\u2502   \u2502       \u2502   \u2502   \u2514\u2500\u2500 main.nf\n\u2502   \u2502       \u2502   \u2514\u2500\u2500 varcal\n\u2502   \u2502       \u2502       \u2514\u2500\u2500 main.nf\n\u2502   \u2502       \u251c\u2500\u2500 smoove\n\u2502   \u2502       \u2502   \u2514\u2500\u2500 main.nf\n\u2502   \u2502       \u251c\u2500\u2500 ucgdtools\n\u2502   \u2502       \u2502   \u2514\u2500\u2500 main.nf\n\u2502   \u2502       \u2514\u2500\u2500 vep\n\u2502   \u2502           \u2514\u2500\u2500 main.nf\n\u2502   \u251c\u2500\u2500 subworkflows\n\u2502   \u2502   \u2514\u2500\u2500 local\n\u2502   \u2502       \u251c\u2500\u2500 alignment.nf\n\u2502   \u2502       \u251c\u2500\u2500 annotations.nf\n\u2502   \u2502       \u251c\u2500\u2500 gvcf_generate.nf\n\u2502   \u2502       \u251c\u2500\u2500 input_preprocess.nf\n\u2502   \u2502       \u251c\u2500\u2500 qc_cram.nf\n\u2502   \u2502       \u251c\u2500\u2500 qc_fastq.nf\n\u2502   \u2502       \u251c\u2500\u2500 qc_vcf.nf\n\u2502   \u2502       \u2514\u2500\u2500 sentieon_vc.nf\n\u2502   \u2514\u2500\u2500 workflows\n\u2502       \u2514\u2500\u2500 local\n\u2502           \u251c\u2500\u2500 jgt.nf\n\u2502           \u251c\u2500\u2500 mosaic.nf\n\u2502           \u251c\u2500\u2500 sv.nf\n\u2502           \u2514\u2500\u2500 var.nf\n\u2514\u2500\u2500 VCFs\n")),(0,i.kt)("h3",{id:"component-description"},"Component description"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Nextflow file"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"ucgd_main.nf")),(0,i.kt)("td",{parentName:"tr",align:null},"The main entry point script contains all ",(0,i.kt)("inlineCode",{parentName:"td"},"-entry")," options.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"ucgd.master.config ")),(0,i.kt)("td",{parentName:"tr",align:null},"Contains all templated paths and definitions.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"ucgd_post_params.yaml")),(0,i.kt)("td",{parentName:"tr",align:null},"Parameter file used to define and initiate launching of post processing steps.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"ucgd_versions.yml")),(0,i.kt)("td",{parentName:"tr",align:null},"Created by the pipeline post processing.  Will contain all software versions for posterity.")))),(0,i.kt)("h3",{id:"processing-overview"},"Processing Overview"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Pipeline Overview",src:t(3541).Z})),(0,i.kt)("h3",{id:"pipeline-dag-visualisation"},"Pipeline DAG visualisation"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"DAG",src:t(9413).Z})))}m.isMDXComponent=!0},3541:function(e,n,t){n.Z=t.p+"assets/images/processing_overview-4774cf6d2c17d0913acd9a45e5b5f736.png"},9413:function(e,n,t){n.Z=t.p+"assets/images/version_2_dag-ea3ba60f032fdcb08826c97c91565287.png"}}]);