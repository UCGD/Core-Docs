<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/Core-Docs/blog/rss.xml" title="UCGD Core Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Core-Docs/blog/atom.xml" title="UCGD Core Blog Atom Feed"><title data-react-helmet="true">Quality of Service and Job Limits | UCGD Core</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://ucgd.github.io/Core-Docs/docs/CHPC_Guide/Quality_of_Service_and_Job_Limits.md"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Quality of Service and Job Limits | UCGD Core"><meta data-react-helmet="true" name="description" content="In SLURM you can set up Quality of Service (QOS) rules to enforce"><meta data-react-helmet="true" property="og:description" content="In SLURM you can set up Quality of Service (QOS) rules to enforce"><link data-react-helmet="true" rel="shortcut icon" href="/Core-Docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://ucgd.github.io/Core-Docs/docs/CHPC_Guide/Quality_of_Service_and_Job_Limits.md"><link data-react-helmet="true" rel="alternate" href="https://ucgd.github.io/Core-Docs/docs/CHPC_Guide/Quality_of_Service_and_Job_Limits.md" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://ucgd.github.io/Core-Docs/docs/CHPC_Guide/Quality_of_Service_and_Job_Limits.md" hreflang="x-default"><link rel="stylesheet" href="/Core-Docs/assets/css/styles.f4b48f89.css">
<link rel="preload" href="/Core-Docs/assets/js/runtime~main.72008d18.js" as="script">
<link rel="preload" href="/Core-Docs/assets/js/main.daf7f451.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Core-Docs/"><img src="/Core-Docs/img/logo.svg" alt="UCGD Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/Core-Docs/img/logo.svg" alt="UCGD Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">UCGD Core</b></a><a class="navbar__item navbar__link navbar__link--active" href="/Core-Docs/docs/Homepage">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/UCGD/Core-Docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_2i4l react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Core-Docs/docs/Homepage">Homepage</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">CHPC_Guide</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/Core-Docs/docs/CHPC_Guide/Data_Retirement_Policy">Data Retirement Policy</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/Core-Docs/docs/CHPC_Guide/Data_Structure_and_Policies">Data Structure and Policies</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/Core-Docs/docs/CHPC_Guide/Development_and_Productivity">Development and Productivity</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/Core-Docs/docs/CHPC_Guide/FastX_CHPC_Desktop">FastX (CHPC Desktop)</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/Core-Docs/docs/CHPC_Guide/Getting_Started_at_CHPC">Getting Started at CHPC</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/Core-Docs/docs/CHPC_Guide/Globus">Globus</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/Core-Docs/docs/CHPC_Guide/Locally_Mount_PE_Directories">Locally Mount PE Directories</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Core-Docs/docs/CHPC_Guide/Quality_of_Service_and_Job_Limits.md">Quality of Service and Job Limits</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/Core-Docs/docs/CHPC_Guide/Rclone_and_Ceph">Rclone and Ceph</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/Core-Docs/docs/CHPC_Guide/Resource Overview">Resource Overview</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/Core-Docs/docs/CHPC_Guide/Setup_UCGD_login_environment">Setup UCGD login environment</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/Core-Docs/docs/CHPC_Guide/Submitting_and_Running_Jobs">Submitting and Running Jobs</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/Core-Docs/docs/CHPC_Guide/Transfering_Data">Transfering Data</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/Core-Docs/docs/CHPC_Guide/VPN_Profiles">VPN Profiles</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/Core-Docs/docs/CHPC_Guide/iTerm_Configuration">iTerm Configuration</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">UCGD-Pipeline</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="theme-doc-markdown markdown"><header><h1>Quality of Service and Job Limits</h1></header><p>In SLURM you can set up Quality of Service (QOS) rules to enforce
resource limits (maximum jobs per user, CPUs, runtime, etc.) as well as
scheduling priorities. We use QOS rules to ensure equitable access to
resources among UCGD users. The QOS you wish to use is specified using
the &#x27;--qos&#x27; option in your batch submission. In the absence of a
specific &#x27;--qos&#x27; option in the batch script, a default is applied.</p><header><h1>Default</h1></header><p>Access to UCGD resources (i.e ucgd-rw account/partition) are limited to
UCGD members, and jobs submitted on those resources are limited to a
maximum wall clock of 24 hours. Also users are limited to 28 active jobs
with a total group limit of 42 active jobs (half the nodes). For longer
running jobs, collaborator access to UCGD resources, or access to more
idle resources there are additional QOS&#x27;s outlined below that can lift
some restriction.</p><p><strong>Example</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH -t 24:00:00   #time</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH -N 1          #number of nodes</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH -A ucgd-rw    #account</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH -p ucgd-rw    #partition</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH --qos ucgd-rw #QOS</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH -J test_job   #job name</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><header><h1>Long Running Jobs</h1></header><p>Jobs of up to 96 hours (4 days) are allowed on UCGD resources by adding
the \&quot;#SBATCH --qos ucgd-long-kp\&quot; parameter at the top of your job. A
maximum of 21 jobs can run in this QOS per user and 28 per group (i.e.
one-third of the UCGD nodes). This limitation ensures that long running
jobs do not completely tie up all nodes on the cluster for several days.</p><p><strong>Example</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH -t 96:00:00        #time</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH -N 1               #number of nodes</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH -A ucgd-rw         #account</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH -p ucgd-rw         #partition</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH --qos ucgd-long-rw #QOS</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH -J test_job        #job name</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><header><h1>Low Priority Jobs</h1></header><p>If a user wishes to submit jobs to all idle UCGD nodes without a cap on
the number of active jobs (either user or group limits), [they can
submit jobs to a low priority QOS (\&quot;#SBATCH --qos
ucgd-low-rw\&quot;)]. With this QOS, your jobs
will always be at the back of the queue compared to other users, and
your job is preemptable to high priority clinical jobs, but the trade
off is you can use all idle resources. Time limit maximum is also lower
than the default QOS (8 hours).</p><p><strong>Example</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH -t 8:00:00       #time</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH -N 1              #number of nodes</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH -A ucgd-rw        #account</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH -p ucgd-rw        #partition</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH --qos ucgd-low-rw #QOS</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH -J test_job       #job name</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><header><h1>Collaborator Access</h1></header><p>Collaborators can access UCGD resources in a limited fashion, but to do
so they must first be added to the ucgdcollaborator group. Lab managers
can request that individuals be added to the ucgdcollaborator group with
ucgd-guest-rw QOS access by submitting a ticket including the
collaborator&#x27;s name and UID to the <a href="https://jira.chpc.utah.edu%20CHPC%20Service%20Desk" target="_blank" rel="noopener noreferrer">https://jira.chpc.utah.edu CHPC
Service
Desk</a>.
By adding \&quot; #SBATCH --qos ucd-guest-kp\&quot; to the top of their batch
scripts, members of the group ucgdcollaborator can submit jobs on up to
7 nodes per user (group limit is 14) with a 24 hour wall clock maximum.
Collaborators may also be given limited (usually Read-Only) access to
files and projects (contact Shawn, Barry, or Carson to modify the access
control lists). As a CHPC user they will have write access to the
general Lustre space at /scratch/mamoth/serial and should do analyses
there rather than on /scratch/ucgd/lustre.</p><p><strong>Example</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH -t 24:00:00         #time</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH -N 1                #number of nodes</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH -A ucgd-rw          #account</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH -p ucgd-rw          #partition</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH --qos ucgd-guest-rw #QOS</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH -J test_job         #job name</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><header><h1>[Production Access]</h1></header><p>[There are two QOS options that are specifically available to the data
production team: ucgd-prod-rw and ucgd-nicu-rw. An explanation of the
production QOS&#x27;s is available here for reference purposes only. The
data production pipeline consists of the initial analysis steps that
produce the BAM and VCF files consumed by almost all downstream research
within UCGD. Because this data is the basis of most UCGD research, funds
cluster hardware purchases, and may be urgently needed for clinical
care, jobs in ]these[ QOS&#x27;s are given a
priority bonus. This higher priority means that production jobs can
advance through the queue faster than default jobs will. However, no
more than 56 nodes (two-thirds of the UCGD nodes) can be active in the
main production QOS (ucgd-prod-rw) at any one time. There is no limit
for the clinical care QOS (ucgd-nicu-rw). The clinical care QOS has the
further ability to ]preempt[ active jobs
in the ucgd-low-rw QOS. This is necessary for critical patient care. The
overall effect of these QOS&#x27;s is that production jobs will not be
backlogged. Instead, they will jump to the front of the line. The
production QOS is specified by adding \&quot;#SBATCH --qos ucgd-prod-rw\&quot; or
\&quot;#SBATCH --qos ucgd-nicu-rw\&quot; to the top of a batch
submission.]</p><p><strong>Example</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH -t 24:00:00        #time</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH -N 7               #number of nodes</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH -A ucgd-rw         #account</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH -p ucgd-rw         #partition</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH --qos ucgd-prod-rw #QOS</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#SBATCH -J test_job        #job name</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/UCGD/Core-Docs/docs/docs/CHPC_Guide/Quality_of_Service_and_Job_Limits.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Core-Docs/docs/CHPC_Guide/Locally_Mount_PE_Directories"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Locally Mount PE Directories</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Core-Docs/docs/CHPC_Guide/Rclone_and_Ceph"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Rclone and Ceph Â»</div></a></div></nav></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">UCGD Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/Core-Docs/docs/Homepage">Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">UCGD Links</div><ul class="footer__items"><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>UCGD Homepage<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/UCGD" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>UCGD Github page<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://cores.utah.edu/ucgd/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>UCGD Core Homepage<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/Core-Docs/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/UCGD/Core-Docs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/Core-Docs/assets/js/runtime~main.72008d18.js"></script>
<script src="/Core-Docs/assets/js/main.daf7f451.js"></script>
</body>
</html>